import java.util.ArrayList;
import com.google.gson.GsonBuilder;

public class Main {
	
	public static ArrayList<Block> blockchain = new ArrayList<Block>();
	public static Database database = new Database();
	
	public static void main(String[] args) {
		
		//add our blocks to the block chain ArrayList:
		blockchain.add( new Block("Genesis", "0") );	
				
		//Print the whole BlockChain
		String blockchainJson = new GsonBuilder().setPrettyPrinting().create().toJson(blockchain);
		System.out.println(blockchainJson);
				
		//Supposed that we met a condition where we need to elect a block master from the BlockChain
		//Add the new block created by the elected Block
		blockMasterElection elector = new blockMasterElection();
		blockchain.add( new Block( "New block generated by genesis block", elector.electBlock( blockchain ).blockHash ) );
		
		//Print the whole BlockChain again
		blockchainJson = new GsonBuilder().setPrettyPrinting().create().toJson(blockchain);
		System.out.println("\n\n" + blockchainJson);
		
		//Testing: Save the entire blockchain to File blockchain.dta
		//for (Block block : blockchain)
		for (Block block : blockchain)
			database.addBlock(block);
	}
}
